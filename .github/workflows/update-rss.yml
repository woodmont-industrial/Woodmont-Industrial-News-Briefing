name: Update RSS Feed

on:
  schedule:
      - cron: '*/30 13-23 * * 1-5'
          - cron: '*/30 0-1 * * 2-6'
            workflow_dispatch:

            permissions:
              contents: write

              jobs:
                update-feed:
                    runs-on: ubuntu-latest
                        timeout-minutes: 15

                            steps:
                                  - name: Checkout repository
                                          uses: actions/checkout@v4
                                                  with:
                                                            fetch-depth: 0

                                                                  - name: Setup Node.js
                                                                          uses: actions/setup-node@v4
                                                                                  with:
                                                                                            node-version: '20'

                                                                                                  - name: Install dependencies
                                                                                                          run: npm install
                                                                                                          
                                                                                                                - name: Build RSS feed
                                                                                                                        run: npm run build-static
                                                                                                                        
                                                                                                                              - name: Verify output
                                                                                                                                      run: ls -la dist/
                                                                                                                                      
                                                                                                                                            - name: Configure git
                                                                                                                                                    run: |
                                                                                                                                                              git config --local user.email "action@github.com"
                                                                                                                                                                        git config --local user.name "GitHub Action"
                                                                                                                                                                        
                                                                                                                                                                              - name: Commit and push changes
                                                                                                                                                                                      run: |
                                                                                                                                                                                                git add dist/
                                                                                                                                                                                                          git commit -m "Update RSS feed content" || true
                                                                                                                                                                                                                    git push
                                                                                                                                                                                                                    
                                                                                                                                                                                                                          - name: Report success
                                                                                                                                                                                                                                  run: echo "RSS feed updated successfully"
